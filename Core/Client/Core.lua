--################################################################################--
--##    ___             _                       ___                             ##--
--##   |   \    ___    | |__   _  _     ___    / __|    ___      _ _    ___     ##--
--##   | |) |  / _ \   | / /  | +| |   (_-<   | (__    / _ \    | '_|  / -_)    ##--
--##   |___/   \___/   |_\_\   \_,_|   /__/_   \___|   \___/   _|_|_   \___|    ##--
--##  _|"""""|_|"""""|_|"""""|_|"""""|_|"""""|_|"""""|_|"""""|_|"""""|_|"""""|  ##--
--##  "`-0-0-'"`-0-0-'"`-0-0-'"`-0-0-'"`-0-0-'"`-0-0-'"`-0-0-'"`-0-0-'"`-0-0-'  ##--
--################################################################################--
--## Author:   DevDokus                                                         ##--
--## Github:   Github.com/DevDokus - Github.com/DokusCore                       ##--
--## Website:  DokusCore.com                                                    ##--
--## Paypal:   Paypal.com/paypalme/dokuscore                                    ##--
--## Tebex:    DevDokus.tebex.io                                                ##--
--################################################################################--
--                     I feel a disturbance within the force                      --
--################################################################################--
------------------------------------------------------------------------------------
------------------------------------------------------------------------------------
Func = {};
------------------------------------------------------------------------------------
------------------------------------------------------------------------------------
InRange             = false;
Playing             = false;
Coords              = nil;
Heading             = nil;
------------------------------------------------------------------------------------
------------------------------------------------------------------------------------
ShowPrompts         = false;
Key_Start, Key_Stop = nil, nil;
Key_Group           = GetRandomIntInRange(0, 0xffffff);
------------------------------------------------------------------------------------
------------------------------------------------------------------------------------
C(function() W(1);
  while (true) do Wait(1000);
    for k, v in pairs(DC.Pianos) do
      InRange = Func:CheckDist(PID(), v.Coords, DC.Distance);
      while (InRange) do W(1);
        local Dist = Func:CheckDist(PID(), v.Coords, DC.Distance);
        InRange = Dist;
        Coords = v.Coords;
        Heading = v.Heading;
        if (not InRange) then
          ShowPrompts         = false;
          Key_Start, Key_Stop = nil, nil;
          Key_Group           = GetRandomIntInRange(0, 0xffffff);
        end;
      end;
    end;
  end;
end);
------------------------------------------------------------------------------------
------------------------------------------------------------------------------------
C(function() W(1000);
  while (true) do W(1000);
    while (InRange) do W(100);
      if (not ShowPrompts) then
        ShowPrompts = true;
        Func:ActPrompts();
        while (ShowPrompts) do W(1);
          local Name = CreateVarString(10, 'LITERAL_STRING', 'Piano');
          PromptSetActiveGroupThisFrame(Key_Group, Name);
          local Start = PromptHasHoldModeCompleted(Key_Start);
          local Stop = PromptHasHoldModeCompleted(Key_Stop);
          if ((Stop) and (Playing)) then Playing = false; ClearPedTasks(PID()); end;
          if ((Start) and (not Playing)) then
            Playing = true;
            local Male = IsPedMale(PID());
            if (Male) then TaskStartScenarioAtPosition(PID(), GetHashKey('PROP_HUMAN_PIANO'), Coords, Heading, 0, true, true, 0, true); end;
            if (not Male) then TaskStartScenarioAtPosition(PID(), GetHashKey('PROP_HUMAN_ABIGAIL_PIANO'), Coords, Heading, 0, true, true, 0, true); end;
          end;
        end;
      end;
    end;
  end;
end);
------------------------------------------------------------------------------------
------------------------------------------------------------------------------------

------------------------------------------------------------------------------------
------------------------------------------------------------------------------------

------------------------------------------------------------------------------------
------------------------------------------------------------------------------------

------------------------------------------------------------------------------------
------------------------------------------------------------------------------------

------------------------------------------------------------------------------------
------------------------------------------------------------------------------------

------------------------------------------------------------------------------------
------------------------------------------------------------------------------------

------------------------------------------------------------------------------------
------------------------------------------------------------------------------------

------------------------------------------------------------------------------------
------------------------------------------------------------------------------------

------------------------------------------------------------------------------------
------------------------------------------------------------------------------------

------------------------------------------------------------------------------------
------------------------------------------------------------------------------------

------------------------------------------------------------------------------------
------------------------------------------------------------------------------------

------------------------------------------------------------------------------------
------------------------------------------------------------------------------------

------------------------------------------------------------------------------------
------------------------------------------------------------------------------------

------------------------------------------------------------------------------------
------------------------------------------------------------------------------------

------------------------------------------------------------------------------------
------------------------------------------------------------------------------------

------------------------------------------------------------------------------------
------------------------------------------------------------------------------------

